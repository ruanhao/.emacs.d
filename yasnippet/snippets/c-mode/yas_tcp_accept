# -*- mode: snippet -*-
# name: yas_tcp_accept
# key: yas_tcp_accept
# --
int Accept(int listenfd)
{
    int connfd;
    while (1) {
        if ((connfd = accept(listenfd, NULL, NULL)) < 0)
#ifdef EPROTO
            if (errno == EPROTO || errno == ECONNABORTED || errno == EINTR)
#else
            if (errno == ECONNABORTED || errno == EINTR)
#endif
                continue;
            else
                err_sys("accept() error");
        break;
    }
    return(connfd);
}
