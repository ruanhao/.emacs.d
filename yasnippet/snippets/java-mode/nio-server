# -*- mode: snippet -*-
# name: nio-server
# key: ss
# --
EventLoopGroup group = new NioEventLoopGroup();
try {
    ServerBootstrap b = new ServerBootstrap();
    b.group(group)
        .channel(NioServerSocketChannel.class)
        .localAddress(new InetSocketAddress(${1:port}))
        .childHandler(new ChannelInitializer<SocketChannel>() {
                @Override
                public void initChannel(SocketChannel ch) throws Exception {
                    ch.pipeline().addLast(${2:MyServerHandler});
                }
            });
    ChannelFuture f = b.bind().sync();
    f.channel().closeFuture().sync();
} catch (Exception e) {
    e.printStackTrace();
}finally {
    try {
        group.shutdownGracefully().sync();
    } catch (Exception e) {
        e.printStackTrace();
    }

}$0